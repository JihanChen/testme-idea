buildscript {
    repositories {
        maven { url 'http://dl.bintray.com/jetbrains/intellij-plugin-service' }
    }
}

apply plugin: 'java'
apply plugin: 'org.jetbrains.intellij'

repositories {
    mavenCentral()
}

sourceCompatibility = 1.6
targetCompatibility = 1.6

def ideaVersion = (rootProject.hasProperty('ideaVersion') && rootProject.ideaVersion) ? rootProject.ideaVersion : '14.1.2'
def scalaPluginVersion = (rootProject.hasProperty('scalaPluginVersion') && rootProject.scalaPluginVersion) ? rootProject.scalaPluginVersion : '1.5.4'
def ideaType = (rootProject.hasProperty('ideaType') && rootProject.ideaType) ? rootProject.ideaType : 'IC'

intellij {
    pluginName 'TestMe'
    instrumentCode = true
    version ideaVersion
    type ideaType
    downloadSources true
    sameSinceUntilBuild false
    updateSinceUntilBuild false
    plugins = ['junit','properties',"org.intellij.scala:$scalaPluginVersion"]
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
    if (!javaHome) {
        javaHome =  System.env.JAVA_HOME
    }
    options.bootClasspath = "$javaHome/jre/lib/rt.jar"
}

//dependencies {
//    compileOnly 'org.jetbrains.plugins:Groovy:${ideaVersion}'
//    compile 'org.jetbrains.plugins:Groovy:${ideaVersion}'
//    compile 'com.jetbrains:ideaIC:${ideaVersion}'
//    compile 'com.jetbrains:ideaIC:14.1.2'
//}

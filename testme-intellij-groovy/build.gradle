buildscript {
    repositories {
        maven { url 'http://dl.bintray.com/jetbrains/intellij-plugin-service' }
    }
}

//id "org.jetbrains.intellij" version "0.2.7"
//plugins {
//    id "org.jetbrains.intellij" version "0.2.7"
//}
apply plugin: 'java'
apply plugin: 'org.jetbrains.intellij'

repositories {
    mavenCentral()
}
//sourceCompatibility = jvmTargetVersion
//targetCompatibility = jvmTargetVersion

sourceCompatibility = 1.8
targetCompatibility = 1.8

def ideaVersion = (rootProject.hasProperty('ideaVersion') && rootProject.ideaVersion) ? rootProject.ideaVersion : '2016.3'
def ideaType = (rootProject.hasProperty('ideaType') && rootProject.ideaType) ? rootProject.ideaType : 'IC'

intellij {
    pluginName 'TestMe'
    instrumentCode = true
    version ideaVersion
    type ideaType
    downloadSources true
    sameSinceUntilBuild false
    updateSinceUntilBuild false
    plugins = ['junit','properties','Groovy']
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
    if (!javaHome) {
        javaHome =  System.env.JAVA_HOME
    }
    options.bootClasspath = "$javaHome/jre/lib/rt.jar"
}

//dependencies {
//    compileOnly 'org.jetbrains.plugins:Groovy:${ideaVersion}'
//    compile 'org.jetbrains.plugins:Groovy:${ideaVersion}'
//    compile 'com.jetbrains:ideaIC:${ideaVersion}'
//    compile 'com.jetbrains:ideaIC:14.1.2'
//}
